\hypertarget{classServer}{}\doxysection{Server Class Reference}
\label{classServer}\index{Server@{Server}}


Класс в котором находятся переменные и функция для подключения сервера к клиенту  




{\ttfamily \#include $<$mdfile.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
string $\ast$ \mbox{\hyperlink{classServer_a54ca0428e56a33a96a3efd38c614d647}{comstr}} (int argc, char $\ast$argv\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Метод класса для отправки сообщени \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classServer_aad6d0eef2397b3368cdd3d6ec134e462}{self\+\_\+addr}} (string error, string file\+\_\+error, int port)
\begin{DoxyCompactList}\small\item\em метод класса для адреса сервера \end{DoxyCompactList}\item 
int \mbox{\hyperlink{classServer_a972db953af9cb2c28ec9359788452a5c}{client\+\_\+addr}} (int s, string error, string file\+\_\+error)
\begin{DoxyCompactList}\small\item\em метод класса для адреса клиента \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classServer_a926c9dae229a62b6d33fdbb41dca6d82}\label{classServer_a926c9dae229a62b6d33fdbb41dca6d82}} 
int {\bfseries port}
\item 
\mbox{\Hypertarget{classServer_a173945e3df7f47ab6aa4735fdab3c51f}\label{classServer_a173945e3df7f47ab6aa4735fdab3c51f}} 
string {\bfseries file\+\_\+name}
\item 
\mbox{\Hypertarget{classServer_aea04365891e842763cd6cec9567901b6}\label{classServer_aea04365891e842763cd6cec9567901b6}} 
string {\bfseries file\+\_\+error}
\item 
\mbox{\Hypertarget{classServer_a5cb736d1e824aa22aae91a7e17b91796}\label{classServer_a5cb736d1e824aa22aae91a7e17b91796}} 
string {\bfseries error}
\item 
\mbox{\Hypertarget{classServer_aefcb18f4a0787bcc7859d9233baa73ef}\label{classServer_aefcb18f4a0787bcc7859d9233baa73ef}} 
string {\bfseries error\+\_\+name}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Класс в котором находятся переменные и функция для подключения сервера к клиенту 

\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classServer_a972db953af9cb2c28ec9359788452a5c}\label{classServer_a972db953af9cb2c28ec9359788452a5c}} 
\index{Server@{Server}!client\_addr@{client\_addr}}
\index{client\_addr@{client\_addr}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{client\_addr()}{client\_addr()}}
{\footnotesize\ttfamily int Server\+::client\+\_\+addr (\begin{DoxyParamCaption}\item[{int}]{s,  }\item[{string}]{error,  }\item[{string}]{file\+\_\+error }\end{DoxyParamCaption})}



метод класса для адреса клиента 

подключение клиента к серверу и передача данных 
\begin{DoxyParams}{Parameters}
{\em s} & сокет \\
\hline
{\em error} & наименование ошибки \\
\hline
{\em file\+\_\+error} & Файл длязаписи ошибок\\
\hline
\end{DoxyParams}
Адрес клиента 
\begin{DoxyCode}{0}
\DoxyCodeLine{sockaddr\_in * \mbox{\hyperlink{classServer_a972db953af9cb2c28ec9359788452a5c}{client\_addr}} = \textcolor{keyword}{new} sockaddr\_in;}
\DoxyCodeLine{socklen\_t len = \textcolor{keyword}{sizeof} (sockaddr\_in);}
\DoxyCodeLine{\textcolor{keywordtype}{int} work\_sock = accept(s, (sockaddr*)(\mbox{\hyperlink{classServer_a972db953af9cb2c28ec9359788452a5c}{client\_addr}}), \&len);}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}(work\_sock == -\/1) \{}
\DoxyCodeLine{\textcolor{keywordtype}{string} error = \textcolor{stringliteral}{"{}error \#2"{}};}
\DoxyCodeLine{\textcolor{keywordflow}{throw} \mbox{\hyperlink{classerror__server}{error\_server}}(\textcolor{keywordtype}{string}(error));}
\DoxyCodeLine{\mbox{\hyperlink{mdfile_8cpp_a856c6e044a5163fbd20e899ce4d020a4}{errors}}(error, file\_error);}
\DoxyCodeLine{\textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{\}}
\DoxyCodeLine{\textcolor{keywordflow}{else} \{}
\DoxyCodeLine{    \textcolor{comment}{//Успешное подключение к серверу}}
\DoxyCodeLine{    cout << \textcolor{stringliteral}{"{}Successfull client connection!\(\backslash\)n"{}};}
\DoxyCodeLine{    \textcolor{keywordflow}{return} work\_sock;}
\DoxyCodeLine{\}}

\end{DoxyCode}
\mbox{\Hypertarget{classServer_a54ca0428e56a33a96a3efd38c614d647}\label{classServer_a54ca0428e56a33a96a3efd38c614d647}} 
\index{Server@{Server}!comstr@{comstr}}
\index{comstr@{comstr}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{comstr()}{comstr()}}
{\footnotesize\ttfamily string $\ast$ Server\+::comstr (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$}]{argv\mbox{[}$\,$\mbox{]} }\end{DoxyParamCaption})}



Метод класса для отправки сообщени 

\begin{DoxyVerb}  @brief подключение клиента к серверу и передача данных

 @details

 утсановка порта по умолчанию
 @code
int port = 33333;
 @endcode

 утсановка пути бд по умолчанию
 @code
string file_name = "/etc/vcalc.conf"; 
 @endcode

 утсановка пути файла ошибок по умолчанию
 @code
string file_error = "/var/log/vcalc.log";
 @endcode
 инициализация ошибки
 @code
string error;
com[3] = error;
 @endcode

 прием данных из ком строки 
 @code
while ((opt = getopt(argc, argv, "hf:p:e:")) != -1) {
    switch(opt) {
        case 'h':
            cout << "Векторный калькулятор выполняющий действие произведения вектора"  << endl;
            cout << "-f БД пользователей -p порт -e файл ошибок" << endl;
            cout << "-h info" << endl;
            cout << "-f file name" << endl;
            cout << "-p port" << endl;
            cout << "-e error file" << endl;
            exit(0);
            break;
        case 'f':
            file_name = string(optarg);
            com[0] = file_name;
            break;
        case 'p':
            port = stoi(string(optarg));
            com[1] = to_string(port);
            break;
        case 'e':
            file_error = string(optarg);
            com[2] = file_error;
            break;
    }
}
return com; */
\end{DoxyVerb}
 \}

///Функция хеширования сообщений string MD(string sah)\{ /$\ast$$\ast$
\begin{DoxyItemize}
\item Функция хеширования $\ast$
\begin{DoxyCode}{0}
\DoxyCodeLine{*Weak::MD5 hash;}
\DoxyCodeLine{*\textcolor{keywordtype}{string} digest;}
\DoxyCodeLine{*StringSource(sah, \textcolor{keyword}{true},  \textcolor{keyword}{new} HashFilter(hash, \textcolor{keyword}{new} HexEncoder(\textcolor{keyword}{new} StringSink(digest))));  \textcolor{comment}{// строка-\/приемник}}
\DoxyCodeLine{*  \textcolor{keywordflow}{return} digest;}
\DoxyCodeLine{  *}

\end{DoxyCode}

\end{DoxyItemize}\mbox{\Hypertarget{classServer_aad6d0eef2397b3368cdd3d6ec134e462}\label{classServer_aad6d0eef2397b3368cdd3d6ec134e462}} 
\index{Server@{Server}!self\_addr@{self\_addr}}
\index{self\_addr@{self\_addr}!Server@{Server}}
\doxysubsubsection{\texorpdfstring{self\_addr()}{self\_addr()}}
{\footnotesize\ttfamily int Server\+::self\+\_\+addr (\begin{DoxyParamCaption}\item[{string}]{error,  }\item[{string}]{file\+\_\+error,  }\item[{int}]{port }\end{DoxyParamCaption})}



метод класса для адреса сервера 

подключение сервера 
\begin{DoxyParams}{Parameters}
{\em error} & наименование ошибки \\
\hline
{\em file\+\_\+error} & Файл длязаписи ошибок \\
\hline
{\em port} & порт соедиения\\
\hline
\end{DoxyParams}
Создание сокета 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \textcolor{keywordtype}{int} s = socket(AF\_INET, SOCK\_STREAM, 0);}
\DoxyCodeLine{ sockaddr\_in * \mbox{\hyperlink{classServer_aad6d0eef2397b3368cdd3d6ec134e462}{self\_addr}} = \textcolor{keyword}{new} (sockaddr\_in);}
\DoxyCodeLine{ \mbox{\hyperlink{classServer_aad6d0eef2397b3368cdd3d6ec134e462}{self\_addr}}-\/>sin\_family = AF\_INET;}
\DoxyCodeLine{ \mbox{\hyperlink{classServer_aad6d0eef2397b3368cdd3d6ec134e462}{self\_addr}}-\/>sin\_port = htons(port);}
\DoxyCodeLine{ \mbox{\hyperlink{classServer_aad6d0eef2397b3368cdd3d6ec134e462}{self\_addr}}-\/>sin\_addr.s\_addr = inet\_addr(\textcolor{stringliteral}{"{}127.0.0.1"{}});}
\DoxyCodeLine{cout << \textcolor{stringliteral}{"{}Wait for connect client...\(\backslash\)n"{}};}

\end{DoxyCode}


Binding socket 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{int} b = bind(s,(\textcolor{keyword}{const} sockaddr*) \mbox{\hyperlink{classServer_aad6d0eef2397b3368cdd3d6ec134e462}{self\_addr}},\textcolor{keyword}{sizeof}(sockaddr\_in));}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordflow}{if}(b == -\/1) \{}
\DoxyCodeLine{\textcolor{keywordtype}{string} error = \textcolor{stringliteral}{"{}binding error"{}};}
\DoxyCodeLine{ \textcolor{keywordflow}{throw} \mbox{\hyperlink{classerror__server}{error\_server}}(\textcolor{keywordtype}{string}(error));}
\DoxyCodeLine{        \mbox{\hyperlink{mdfile_8cpp_a856c6e044a5163fbd20e899ce4d020a4}{errors}}(error,  file\_error);}
\DoxyCodeLine{         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{     \}}
\DoxyCodeLine{}
\DoxyCodeLine{     listen(s, SOMAXCONN);}
\DoxyCodeLine{     \textcolor{keywordflow}{return} s;}

\end{DoxyCode}


The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{mdfile_8h}{mdfile.\+h}}\item 
\mbox{\hyperlink{mdfile_8cpp}{mdfile.\+cpp}}\end{DoxyCompactItemize}
